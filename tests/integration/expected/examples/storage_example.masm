# mod miden:storage-example/foo@1.0.0

export.set-asset-qty

        exec.::miden:storage-example/foo@1.0.0::storage_example::miden:storage-example/foo@1.0.0#set-asset-qty
end


export.get-asset-qty

        exec.::miden:storage-example/foo@1.0.0::storage_example::miden:storage-example/foo@1.0.0#get-asset-qty
end


export.init

        push.2162688
        exec.::intrinsics::mem::heap_init
        push.5121323707957172480
        push.16385291266171272914
        push.3612753469884014922
        push.8597705872349702967
        adv.push_mapval
        push.262144
        push.3
        exec.::std::mem::pipe_preimage_to_memory
        drop
        push.1048576
        u32assert
        mem_store.262144
end


# mod miden:storage-example/foo@1.0.0::storage_example

proc.miden_base_sys::bindings::storage::extern_get_storage_item

        exec.::miden::account::get_item
        movup.4
        dup.0
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.4
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.8
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.12
        add
        u32assert
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
end


proc.miden_base_sys::bindings::storage::extern_get_storage_map_item

        exec.::miden::account::get_map_item
        movup.4
        dup.0
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.4
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.8
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.12
        add
        u32assert
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
end


proc.miden_base_sys::bindings::storage::extern_set_storage_map_item

        exec.::miden::account::set_map_item
        movup.8
        dup.0
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.4
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.8
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.12
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.16
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.20
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.24
        dup.1
        swap.1
        add
        u32assert
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.28
        add
        u32assert
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
end


proc.__wasm_call_ctors

        nop
end


proc.storage_example::bindings::__link_custom_section_describing_imports

        nop
end


proc.__rustc::__rust_alloc

        push.1048612
        movup.2
        swap.1
        exec.::miden:storage-example/foo@1.0.0::storage_example::<miden_sdk_alloc::BumpAlloc as core::alloc::global::GlobalAlloc>::alloc
end


proc.__rustc::__rust_realloc

        push.1048612
        dup.4
        swap.2
        swap.4
        swap.1
        exec.::miden:storage-example/foo@1.0.0::storage_example::<miden_sdk_alloc::BumpAlloc as core::alloc::global::GlobalAlloc>::alloc
        push.0
        push.0
        dup.2
        swap.1
        eq
        neq
        if.true

            movdn.3
            drop
            drop
            drop
        else

            push.0
            dup.2
            dup.5
            swap.1
            u32lt
            neq
            swap.1
            swap.4
            swap.1
            cdrop
            push.0
            push.0
            dup.2
            swap.1
            eq
            neq
            if.true

                drop
                drop
            else

                dup.2
                movup.2
                push.0
                dup.3
                push.0
                gte
                while.true

                    dup.2
                    dup.1
                    push.1
                    u32overflowing_madd
                    assertz
                    dup.2
                    dup.2
                    push.1
                    u32overflowing_madd
                    assertz
                    u32divmod.4
                    swap.1
                    exec.::intrinsics::mem::load_sw
                    push.128
                    u32and
                    swap.1
                    u32divmod.4
                    swap.1
                    dup.2
                    dup.2
                    dup.2
                    exec.::intrinsics::mem::load_sw
                    push.4294967040
                    u32and
                    movup.5
                    u32or
                    movdn.4
                    exec.::intrinsics::mem::store_sw
                    u32wrapping_add.1
                    dup.0
                    dup.4
                    u32gte
                end
                dropw
            end
        end
end


export.miden:storage-example/foo@1.0.0#set-asset-qty

        push.1048576
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_sw
        push.4294967264
        push.128
        dup.2
        swap.1
        u32wrapping_sub
        u32and
        push.1048576
        dup.1
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_sw
        exec.::miden:storage-example/foo@1.0.0::storage_example::wit_bindgen_rt::run_ctors_once
        push.12
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.10
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.8
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.9
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.4
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.8
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        dup.0
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.7
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.0
        push.32
        dup.2
        swap.1
        u32wrapping_add
        exec.::miden:storage-example/foo@1.0.0::storage_example::miden_base_sys::bindings::storage::get_item
        push.44
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.40
        dup.2
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.36
        dup.3
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.32
        dup.4
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.0
        push.1
        movup.8
        movup.3
        eq
        neq
        neq
        if.true

            dropw
            movdn.4
            dropw
        else

            push.0
            push.1
            movup.7
            movup.3
            eq
            neq
            neq
            if.true

                drop
                drop
                drop
                movdn.3
                drop
                drop
                drop
            else

                push.0
                push.1
                movup.6
                movup.3
                eq
                neq
                neq
                if.true

                    drop
                    drop
                    movdn.2
                    drop
                    drop
                else

                    push.0
                    push.1
                    movup.5
                    movup.3
                    eq
                    neq
                    neq
                    if.true

                        drop
                        swap.1
                        drop
                    else

                        push.96
                        dup.1
                        swap.1
                        u32wrapping_add
                        movup.3
                        swap.1
                        exec.::miden:storage-example/foo@1.0.0::storage_example::<miden_stdlib_sys::intrinsics::word::Word as core::convert::From<miden_stdlib_sys::intrinsics::felt::Felt>>::from
                        push.96
                        dup.1
                        swap.1
                        u32wrapping_add
                        push.1
                        push.32
                        dup.3
                        swap.1
                        u32wrapping_add
                        movup.2
                        swap.3
                        movdn.2
                        exec.::miden:storage-example/foo@1.0.0::storage_example::miden_base_sys::bindings::storage::set_map_item
                    end
                end
            end
        end
        push.1048576
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_sw
end


export.miden:storage-example/foo@1.0.0#get-asset-qty

        push.1048576
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_sw
        push.4294967264
        push.64
        dup.2
        swap.1
        u32wrapping_sub
        u32and
        push.1048576
        dup.1
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_sw
        exec.::miden:storage-example/foo@1.0.0::storage_example::wit_bindgen_rt::run_ctors_once
        push.12
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.6
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.8
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.5
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.4
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.4
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        dup.0
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.3
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.1
        push.32
        dup.2
        swap.1
        u32wrapping_add
        dup.2
        swap.2
        swap.1
        exec.::miden:storage-example/foo@1.0.0::storage_example::miden_base_sys::bindings::storage::get_map_item
        push.44
        swap.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.1048576
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_sw
end


export.cabi_realloc_wit_bindgen_0_28_0

        exec.::miden:storage-example/foo@1.0.0::storage_example::wit_bindgen_rt::cabi_realloc
end


proc.wit_bindgen_rt::cabi_realloc

        push.0
        dup.2
        swap.1
        neq
        if.true

            exec.::miden:storage-example/foo@1.0.0::storage_example::__rustc::__rust_realloc
            push.0
            push.3735929054
            movup.2
        else

            drop
            drop
            push.0
            push.0
            dup.3
            swap.1
            eq
            neq
            if.true

                swap.1
                drop
                push.1
                push.3735929054
                movup.2
                swap.1
            else

                swap.1
                exec.::miden:storage-example/foo@1.0.0::storage_example::__rustc::__rust_alloc
                push.0
                push.3735929054
                movup.2
            end
        end
        movup.2
        eq.0
        if.true

            swap.1
            drop
            push.0
            dup.1
            swap.1
            neq
            if.true

                push.0
                swap.1
            else

                drop
                push.1
                push.3735929054
            end
        else

            drop
            push.0
            swap.1
        end
        push.0
        movup.2
        swap.1
        eq
        if.true

            nop
        else

            drop
            push.0
            assert
        end
end


proc.wit_bindgen_rt::run_ctors_once

        push.1048617
        push.0
        add
        u32assert
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_sw
        push.128
        u32and
        push.0
        swap.1
        neq
        if.true

            nop
        else

            exec.::miden:storage-example/foo@1.0.0::storage_example::__wasm_call_ctors
            push.1
            push.1048617
            push.0
            add
            u32assert
            u32divmod.4
            swap.1
            dup.2
            dup.2
            dup.2
            exec.::intrinsics::mem::load_sw
            push.4294967040
            u32and
            movup.5
            u32or
            movdn.4
            exec.::intrinsics::mem::store_sw
        end
end


proc.<miden_sdk_alloc::BumpAlloc as core::alloc::global::GlobalAlloc>::alloc

        push.32
        push.0
        push.32
        dup.4
        swap.1
        u32gt
        neq
        dup.3
        swap.1
        cdrop
        push.0
        push.4294967295
        dup.2
        swap.1
        u32wrapping_add
        dup.2
        swap.1
        u32and
        neq
        if.true

            dropw
            push.0
            push.3735929054
        else

            movup.2
            exec.::miden:storage-example/foo@1.0.0::storage_example::core::ptr::alignment::Alignment::max
            push.0
            push.2147483648
            dup.2
            u32wrapping_sub
            dup.4
            swap.1
            u32gt
            neq
            if.true

                drop
                drop
                drop
                push.0
                push.3735929054
            else

                push.0
                dup.1
                swap.1
                u32wrapping_sub
                push.4294967295
                movup.4
                dup.3
                u32wrapping_add
                u32wrapping_add
                u32and
                dup.2
                push.4
                dup.1
                swap.1
                u32mod
                u32assert
                assertz.err=250
                u32divmod.4
                swap.1
                exec.::intrinsics::mem::load_sw
                push.0
                neq
                if.true

                    push.0
                    swap.3
                else

                    exec.::intrinsics::mem::heap_base
                    exec.::intrinsics::mem::memory_size
                    dup.4
                    push.4
                    dup.1
                    swap.1
                    u32mod
                    u32assert
                    assertz.err=250
                    push.16
                    movup.2
                    swap.1
                    u32shl
                    movup.2
                    swap.1
                    u32wrapping_add
                    swap.1
                    u32divmod.4
                    swap.1
                    exec.::intrinsics::mem::store_sw
                    push.0
                    swap.3
                end
                dup.0
                push.4
                dup.1
                swap.1
                u32mod
                u32assert
                assertz.err=250
                u32divmod.4
                swap.1
                exec.::intrinsics::mem::load_sw
                push.0
                dup.3
                push.268435456
                dup.3
                u32wrapping_sub
                swap.1
                u32lt
                neq
                if.true

                    dropw
                    push.1
                    swap.1
                else

                    movup.4
                    drop
                    swap.1
                    push.4
                    dup.1
                    swap.1
                    u32mod
                    u32assert
                    assertz.err=250
                    dup.1
                    movup.3
                    u32wrapping_add
                    swap.1
                    u32divmod.4
                    swap.1
                    exec.::intrinsics::mem::store_sw
                    push.1
                    swap.1
                    movup.2
                    u32wrapping_add
                end
            end
        end
        push.0
        movup.2
        swap.1
        eq
        if.true

            drop
            push.0
            assert
        else

            nop
        end
end


proc.miden_base_sys::bindings::storage::get_item

        push.255
        movup.2
        swap.1
        u32and
        exec.::miden:storage-example/foo@1.0.0::storage_example::miden_base_sys::bindings::storage::extern_get_storage_item
end


proc.miden_base_sys::bindings::storage::get_map_item

        dup.2
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.4
        dup.4
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.8
        dup.5
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.12
        movup.6
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.255
        movup.6
        swap.1
        u32and
        movup.2
        swap.3
        movdn.2
        swap.1
        swap.4
        swap.1
        exec.::miden:storage-example/foo@1.0.0::storage_example::miden_base_sys::bindings::storage::extern_get_storage_map_item
end


proc.miden_base_sys::bindings::storage::set_map_item

        dup.2
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.4
        dup.4
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.8
        dup.5
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.12
        movup.6
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        dup.6
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.4
        dup.8
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.8
        dup.9
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.12
        movup.10
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::load_felt
        push.255
        movup.10
        swap.1
        u32and
        movup.4
        swap.5
        movdn.4
        movup.3
        swap.6
        movdn.3
        movup.2
        swap.7
        movdn.2
        swap.1
        swap.8
        swap.1
        exec.::miden:storage-example/foo@1.0.0::storage_example::miden_base_sys::bindings::storage::extern_set_storage_map_item
end


proc.<miden_stdlib_sys::intrinsics::word::Word as core::convert::From<miden_stdlib_sys::intrinsics::felt::Felt>>::from

        push.12
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        movup.2
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.8
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        push.0
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.4
        dup.1
        add
        u32assert
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        push.0
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
        push.4
        dup.1
        swap.1
        u32mod
        u32assert
        assertz.err=250
        push.0
        swap.1
        u32divmod.4
        swap.1
        exec.::intrinsics::mem::store_felt
end


proc.core::ptr::alignment::Alignment::max

        push.0
        dup.2
        dup.2
        swap.1
        u32gt
        neq
        cdrop
end


export.cabi_realloc

        exec.::miden:storage-example/foo@1.0.0::storage_example::cabi_realloc_wit_bindgen_0_28_0
end


